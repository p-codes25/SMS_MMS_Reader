# SMS_MMS_Reader

## Overview

This is a Windows application which loads and displays backup files created by the [SMS Backup & Restore app for Android, by SyncTech](https://www.synctech.com.au/).  I have no affiliation with them - I just wrote this program using their [documented backup file format](https://www.synctech.com.au/sms-backup-restore/fields-in-xml-backup-files/).

SMS Backup & Restore is an awesome app for backing up SMS/MMS messages and phone call logs from an Android phone.  It writes the backups to an XML-formatted file which can be transferred to a Windows PC and opened and viewed using the SMS_MMS_Reader app.

## Features

The SMS_MMS_Reader app offers the following capabilities:

* It's built as a Windows MFC app for x86 (32-bit) or x64 (64-bit) systems running Windows 7 or later (possibly older versions too).

* It's fairly fast -- a release build can load a 1GB SMS/MMS backup file in around 10 seconds on a reasonably fast system.

* You can drag-and-drop to load multiple backup files into the viewer, into a single window or into separate windows.

* You can view the list of conversations, with the name(s) and phone number(s) of each, along with the number of messages and total storage size used in total by each conversation.

* You can view and sort the list of message conversations (threads) in each window.

* You can select a conversation (message thread) and double-click or press Enter to view that conversation's messages in a separate window.

* The conversation view displays images inline as thumbnails, and you can click to view an image full-size (or click to play an audio or video attachment, or open/save other attachment types using an external viewer/player/etc.)

* You can filter the conversation list by address or contact name, by date range and by message text.

## Known Problems / Limitations

* The conversation view is done by generating simple HTML, which then gets displayed by the MFC CHtmlView class, which in turn uses the Windows WebBrowser control, so it's more or less like an old IE (Internet Explorer) control.  The conversation display looks pretty basic as a result.  The look might be improved by adding some more CSS tricks or even writing a custom display engine.

* I'm not sure the contact names are correctly matched up with contact addresses (phone numbers) in all cases.  See comments above GetFromName() in SMS_MMS_ReaderFile.h.  I'm not sure if this is a problem with that code or with the XML file format produced by SMS Backup & Restore.

## Source Code

I built the project using Visual Studio 2015, but it should build and run in any later Visual Studio version as well.  There are x86 (32-bit) and x64 (64-bit) Windows targets, and I've tested both in Debug and Release mode.

Release mode is significantly faster, so you will probably want to use that for loading large backup files.

# User's Guide

To use the program, you will first have to transfer the backup files generated by SyncTech's SMS Backup & Restore, to your PC.  SMS Backup & Restore produces XML-format files with an .xml file extension, and you can transfer these to a Windows system via BlueTooth, USB connection or other methods.

## Opening Files

There are a couple ways to open the .xml files in SMS_MMS_Reader:

* Use SMS_MMS_Reader's File -> Open menu command to select a single file to open.

* Or, you can select multiple files from Windows Explorer and drag-and-drop them onto the SMS_MMS_Reader window.  When you do that, you will be asked "Do you want to open all the files in a single window?"

	* If you reply Yes, all of the selected files will be loaded and combined into a single window which lists all the conversations from those files.

	* Or if you reply No, each selected file will be opened in its own separate window.

## Main File View

Each document window in the SMS_MMS_Reader app indicates the .xml filename at the top, and then lists all the SMS/MMS message conversations in the file.  For each conversation, the following columns are shown in the window:

	* Address - Contains one or more addresses (phone numbers or email addresses, or maybe other types) for the conversation.

	* Name - Lists the names associated with the addresses, separated by commas.  Note: I have seen an issue where the names don't always match up with the addresses - I'll be working on that. It's rare in my experience though!

	* # Messages - Shows the number of messages in each conversation.

	* First Date/Time - Shows the date/time of the oldest loaded message for each conversation.

	* Last Date/Time - Shows the date/time of the newest loaded message for each conversation.

	* Total Size - Shows the total size of all the loaded messages for each conversation, including attachments.

You can click on any of the column headings in order to sort the conversations by that column; this makes it easy to find the oldest/newest conversations or the conversations taking up the most storage space, for example.

To view a conversation, double-click it in the list, or select it with the keyboard and press Enter.  This opens a new window showing the messages in that conversation (see Conversation View below).

## Filtering Conversations and Messages

From the main file view, you can use the View -> Filter Conversations... menu command to filter which conversations and messages get displayed.

The first field in the dialog lets you filter conversations by the Address and Name field. Any text you enter here, must appear in either the Address or Name field of a conversation in order for that conversation to be shown.

Next, the dialog offers a field that lets you filter by message text.  Any text you enter here, must appear in at least one message in a conversation, in order for that conversation to be shown in the list.

Below that, there are two date/calendar controls which let you specify the starting and ending date range (inclusive) to display.  Only conversations that contain at least one message within the specified date range, will be displayed.

Finally, there are two radio buttons which let you control the filtering of messages within conversations:

* Selecting the first radio button causes all messages to be shown, for any conversations that meet the filter criteria above.

* Selecting the second radio button causes only messages that meet the filter criteria to be shown.

In other words, these two radio buttons lets you choose whether *all* messages or *filtered* messages appear within the conversations that match the filters you specify.

## Conversation View

When you double-click on a conversation in the list (or select it and press Enter), a new conversation view window opens for that conversation.  The conversation view window shows the messages in that conversation (the messages may be filtered, depending on the filtering options you set in the main file view - see above).

At the top of the window, the names and addresses (phone numbers or email addresses) for the conversation are shown.

Messages shown in grey are "received" messages; messages shown indented in green are "sent" messages, from the perspective of the device where the SMS Backup & Restore .xml file came from.

### MMS Attachments

Some types of MMS images are shown inline as thumbnails - currently these are GIF, JPEG and PNG images, because the Microsoft CHtmlView class can display those.  Other MMS attachment types, such as video or audio clips, are shown as "Attachment" plus the filename, and you can click on those to open them.

The View -> Open Attachments menu lets you choose how to open inline or linked attachments when you click on them.  There are three choices:

* In Same Window - the attachment will be loaded and "navigated to" in the same window.  You can use the "Back" toolbar button (the red arrow pointing left) to navigate back to the main conversation display (or use the Alt+Left Arrow keyboard shortcut).

* In New Window - clicking the attachment will open a new document window showing just that attachment.  You can close the window when you are done viewing the attachment.

* In Default Windows Application - clicking the attachment will open the default Windows application for that attachment type.  NOTE - There is no prompt before the attachment will be opened, so be careful when opening any attachments from an unknown source!

### Printing/Saving

I have not put any work into the printing/saving capabilities of the app.  Printing seems to work (I tried printing to a PDF generator, for example).  Saving does not seem to do anything (it generates an empty .html file).  I might work on that in the future.

